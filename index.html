<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FOURA CINEMA | ÙÙˆØ±Ø§ Ø³ÙŠÙ†Ù…Ø§</title>
    <style>
        /* Foura Cinema Theme - Modern Arabic Design */
        :root {
            --primary: #e50914;
            --primary-dark: #b20710;
            --dark: #141414;
            --dark-light: #1f1f1f;
            --light: #ffffff;
            --gray: #8c8c8c;
            --success: #46d369;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Cairo', 'Segoe UI', sans-serif;
            background: var(--dark);
            color: var(--light);
            line-height: 1.6;
        }
        
        /* Header */
        .header {
            position: fixed;
            top: 0;
            width: 100%;
            padding: 15px 40px;
            background: linear-gradient(to bottom, rgba(0,0,0,0.9) 0%, transparent 100%);
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 1000;
            transition: background 0.3s;
        }
        
        .header.scrolled {
            background: var(--dark);
            box-shadow: 0 2px 10px rgba(0,0,0,0.5);
        }
        
        .logo {
            font-size: 32px;
            font-weight: 900;
            color: var(--primary);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo span {
            color: var(--light);
        }
        
        .nav-links {
            display: flex;
            gap: 25px;
            flex: 1;
            justify-content: center;
        }
        
        .nav-link {
            color: var(--gray);
            text-decoration: none;
            font-size: 16px;
            transition: color 0.3s;
            position: relative;
        }
        
        .nav-link:hover,
        .nav-link.active {
            color: var(--light);
        }
        
        .nav-link.active::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 100%;
            height: 3px;
            background: var(--primary);
        }
        
        .search-container {
            position: relative;
        }
        
        .search-input {
            background: rgba(0,0,0,0.75);
            border: 1px solid var(--gray);
            border-radius: 4px;
            padding: 8px 15px;
            padding-right: 40px;
            color: var(--light);
            width: 250px;
            font-size: 14px;
            transition: all 0.3s;
        }
        
        .search-input:focus {
            outline: none;
            border-color: var(--primary);
            width: 300px;
        }
        
        .search-btn {
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--gray);
            cursor: pointer;
        }
        
        /* Hero Section */
        .hero {
            height: 70vh;
            background: linear-gradient(to right, rgba(0,0,0,0.9), rgba(0,0,0,0.4)),
                        var(--hero-background, url('https://images.unsplash.com/photo-1536440136628-849c177e76a1?ixlib=rb-1.2.1&auto=format&fit=crop&w=1920&q=80'));
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: center;
            padding: 0 40px;
            margin-top: 70px;
        }
        
        .hero-content {
            max-width: 600px;
        }
        
        .hero-title {
            font-size: 48px;
            font-weight: 900;
            margin-bottom: 20px;
            line-height: 1.2;
        }
        
        .hero-description {
            font-size: 18px;
            color: var(--gray);
            margin-bottom: 30px;
            max-width: 500px;
        }
        
        .hero-buttons {
            display: flex;
            gap: 15px;
        }
        
        .btn {
            padding: 12px 30px;
            border-radius: 4px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            border: none;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .btn-primary {
            background: var(--primary);
            color: var(--light);
        }
        
        .btn-primary:hover {
            background: var(--primary-dark);
            transform: scale(1.05);
        }
        
        .btn-secondary {
            background: rgba(109, 109, 110, 0.7);
            color: var(--light);
        }
        
        .btn-secondary:hover {
            background: rgba(109, 109, 110, 0.9);
        }
        
        /* Content Sections */
        .content-section {
            padding: 40px;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .section-title {
            font-size: 24px;
            font-weight: bold;
        }
        
        .see-all {
            color: var(--primary);
            text-decoration: none;
            font-size: 14px;
            transition: color 0.3s;
        }
        
        .see-all:hover {
            color: var(--light);
        }
        
        /* Content Grid */
        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
        }
        
        /* Movie/Series Card */
        .content-card {
            position: relative;
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.3s;
            background: var(--dark-light);
            height: 300px;
        }
        
        .content-card:hover {
            transform: scale(1.05);
            z-index: 10;
        }
        
        .content-poster {
            width: 100%;
            height: 100%;
            object-fit: cover;
            background: var(--dark-light);
        }
        
        .content-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0,0,0,0.9));
            padding: 15px;
            transform: translateY(100%);
            transition: transform 0.3s;
        }
        
        .content-card:hover .content-overlay {
            transform: translateY(0);
        }
        
        .content-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 5px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .content-meta {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: var(--gray);
        }
        
        .content-hd {
            color: var(--success);
            font-weight: bold;
        }
        
        .content-type {
            background: var(--primary);
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 11px;
        }
        
        /* Episode Selector */
        .episodes-container {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            z-index: 2000;
            padding: 40px;
            overflow-y: auto;
        }
        
        .episodes-container.active {
            display: block;
        }
        
        .episodes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .episode-card {
            background: var(--dark-light);
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .episode-card:hover {
            transform: scale(1.05);
            border: 2px solid var(--primary);
        }
        
        .episode-number {
            padding: 10px;
            text-align: center;
            font-weight: bold;
            background: var(--primary);
            color: white;
        }
        
        /* Player */
        .player-container {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            z-index: 3000;
            padding: 40px;
        }
        
        .player-container.active {
            display: block;
        }
        
        .video-player {
            width: 100%;
            height: 100%;
            border-radius: 8px;
            background: #000;
        }
        
        .close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--primary);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 20px;
            cursor: pointer;
            z-index: 3001;
        }
        
        /* Loading */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 300px;
            font-size: 18px;
            color: var(--gray);
        }
        
        .loading::after {
            content: '';
            width: 30px;
            height: 30px;
            border: 3px solid var(--gray);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Continue Watching */
        .continue-watching-card {
            position: relative;
        }
        
        .progress-bar {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: rgba(255,255,255,0.3);
        }
        
        .progress {
            height: 100%;
            background: var(--primary);
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .header {
                padding: 15px 20px;
            }
            
            .nav-links {
                display: none;
            }
            
            .search-input {
                width: 150px;
            }
            
            .search-input:focus {
                width: 200px;
            }
            
            .hero {
                height: 50vh;
                padding: 0 20px;
            }
            
            .hero-title {
                font-size: 32px;
            }
            
            .content-section {
                padding: 20px;
            }
            
            .content-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
                gap: 15px;
            }
        }
        
        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }
        
        ::-webkit-scrollbar-track {
            background: var(--dark);
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 5px;
        }
        
        /* Error Message */
        .error-message {
            background: rgba(229, 9, 20, 0.1);
            border: 1px solid var(--primary);
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            margin: 20px;
        }
        
        .retry-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            margin-top: 15px;
            cursor: pointer;
            font-weight: bold;
        }
        
        /* Series/Movie Badge */
        .content-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--primary);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: bold;
        }
        
        /* Poster Error Handling */
        .poster-error {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            font-size: 14px;
            text-align: center;
            padding: 20px;
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700;900&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header class="header" id="header">
        <a href="#" class="logo">FOURA<span>CINEMA</span></a>
        
        <nav class="nav-links">
            <a href="#" class="nav-link active">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
            <a href="#" class="nav-link" onclick="showContent('movies')">Ø§Ù„Ø£ÙÙ„Ø§Ù…</a>
            <a href="#" class="nav-link" onclick="showContent('series')">Ø§Ù„Ù…Ø³Ù„Ø³Ù„Ø§Øª</a>
            <a href="#" class="nav-link" onclick="showContinueWatching()">Ø£ÙƒÙ…Ù„ Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø©</a>
            <a href="#" class="nav-link" onclick="showMyList()">Ù‚Ø§Ø¦Ù…ØªÙŠ</a>
        </nav>
        
        <div class="search-container">
            <input type="text" class="search-input" id="searchInput" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† ÙÙŠÙ„Ù… Ø£Ùˆ Ù…Ø³Ù„Ø³Ù„...">
            <button class="search-btn" onclick="performSearch()">ğŸ”</button>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="heroSection">
        <div class="hero-content">
            <h1 class="hero-title" id="heroTitle">Ø§Ø³ØªÙ…ØªØ¹ Ø¨Ø£ÙØ¶Ù„ Ø§Ù„Ø£ÙÙ„Ø§Ù… ÙˆØ§Ù„Ù…Ø³Ù„Ø³Ù„Ø§Øª</h1>
            <p class="hero-description" id="heroDescription">Ø¢Ù„Ø§Ù Ø§Ù„Ø£ÙÙ„Ø§Ù… ÙˆØ§Ù„Ù…Ø³Ù„Ø³Ù„Ø§Øª Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ÙˆØ§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© Ø¨Ø¬ÙˆØ¯Ø© Ø¹Ø§Ù„ÙŠØ©ØŒ Ù…ØªØ§Ø­Ø© Ù„Ù„Ø¨Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø£Ø¬Ù‡Ø²ØªÙƒ.</p>
            <div class="hero-buttons">
                <button class="btn btn-primary" onclick="playRandom()">
                    <span>â–¶</span> ØªØ´ØºÙŠÙ„ Ø¹Ø´ÙˆØ§Ø¦ÙŠ
                </button>
                <button class="btn btn-secondary" onclick="showInfo()">
                    <span>â“˜</span> Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª
                </button>
            </div>
        </div>
    </section>

    <!-- Continue Watching -->
    <section class="content-section" id="continueSection" style="display: none;">
        <div class="section-header">
            <h2 class="section-title">Ø£ÙƒÙ…Ù„ Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø©</h2>
            <a href="#" class="see-all" onclick="clearHistory()">Ù…Ø³Ø­ Ø§Ù„Ø³Ø¬Ù„</a>
        </div>
        <div class="content-grid" id="continueGrid"></div>
    </section>

    <!-- Movies Section -->
    <section class="content-section" id="moviesSection">
        <div class="section-header">
            <h2 class="section-title">Ø§Ù„Ø£ÙÙ„Ø§Ù… Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©</h2>
            <a href="#" class="see-all" onclick="loadMore('movies')">Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„</a>
        </div>
        <div class="content-grid" id="moviesGrid">
            <div class="loading">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
        </div>
    </section>

    <!-- Series Section -->
    <section class="content-section" id="seriesSection">
        <div class="section-header">
            <h2 class="section-title">Ø§Ù„Ù…Ø³Ù„Ø³Ù„Ø§Øª Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©</h2>
            <a href="#" class="see-all" onclick="loadMore('series')">Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„</a>
        </div>
        <div class="content-grid" id="seriesGrid">
            <div class="loading">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
        </div>
    </section>

    <!-- Arabic Content -->
    <section class="content-section" id="arabicSection">
        <div class="section-header">
            <h2 class="section-title">Ù…Ø­ØªÙˆÙŠØ§Øª Ø¹Ø±Ø¨ÙŠØ©</h2>
            <a href="#" class="see-all" onclick="loadMore('arabic')">Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„</a>
        </div>
        <div class="content-grid" id="arabicGrid">
            <div class="loading">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
        </div>
    </section>

    <!-- Search Results -->
    <section class="content-section" id="searchSection" style="display: none;">
        <div class="section-header">
            <h2 class="section-title" id="searchTitle">Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø«</h2>
            <a href="#" class="see-all" onclick="hideSearch()">Ø¥Ø®ÙØ§Ø¡</a>
        </div>
        <div class="content-grid" id="searchGrid"></div>
    </section>

    <!-- Episodes Selector -->
    <div class="episodes-container" id="episodesContainer">
        <button class="close-btn" onclick="closeEpisodes()">âœ•</button>
        <h2 id="episodesTitle" style="margin-bottom: 20px;"></h2>
        <div class="episodes-grid" id="episodesGrid"></div>
    </div>

    <!-- Video Player -->
    <div class="player-container" id="playerContainer">
        <button class="close-btn" onclick="closePlayer()">âœ•</button>
        <video class="video-player" id="videoPlayer" controls></video>
    </div>

    <script>

// Configuration - SIMPLE FIX
const CONFIG = {
            username: 'xadel99320',
            password: '01070115953',
            server: 'http://sa.savpn.xyz',
            videoServer: 'http://invo2-103.tutor3.site'
        };

        // State
        let movies = [];
        let series = [];
        let watchHistory = {};

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            setupEventListeners();
            loadContent();
        });

        // Setup event listeners
        function setupEventListeners() {
            window.addEventListener('scroll', () => {
                const header = document.getElementById('header');
                header.classList.toggle('scrolled', window.scrollY > 50);
            });

            document.getElementById('searchInput').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') performSearch();
            });

            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') closePlayer();
            });
        }

        // Load content - SIMPLE VERSION
        async function loadContent() {
            try {
                // Load movies
                const moviesUrl = `${CONFIG.server}/player_api.php?username=${CONFIG.username}&password=${CONFIG.password}&action=get_vod_streams`;
                const moviesResponse = await fetch(moviesUrl);
                
                if (moviesResponse.ok) {
                    movies = await moviesResponse.json();
                    movies = movies.filter(item => item.stream_type === 'movie' || !item.stream_type);
                    
                    // Display in sections
                    displayMovies('moviesGrid', movies.slice(0, 12));
                    
                    // Arabic movies
                    const arabicMovies = movies.filter(item => 
                        /[\u0600-\u06FF]/.test(item.name)
                    );
                    displayMovies('arabicGrid', arabicMovies.slice(0, 12));
                    
                    // Update hero
                    updateHero();
                }

                // Load series
                const seriesUrl = `${CONFIG.server}/player_api.php?username=${CONFIG.username}&password=${CONFIG.password}&action=get_series`;
                const seriesResponse = await fetch(seriesUrl);
                
                if (seriesResponse.ok) {
                    series = await seriesResponse.json();
                    displayMovies('seriesGrid', series.slice(0, 12), 'series');
                }

            } catch (error) {
                console.error('Error:', error);
                // Use sample data if API fails
                movies = getSampleMovies();
                displayMovies('moviesGrid', movies.slice(0, 12));
                displayMovies('arabicGrid', movies.slice(0, 6));
            }
        }

        // Display movies
        function displayMovies(gridId, items, type = 'movie') {
            const grid = document.getElementById(gridId);
            if (!items || items.length === 0) return;
            
            grid.innerHTML = '';
            
            items.forEach(item => {
                const card = createMovieCard(item, type);
                grid.appendChild(card);
            });
        }

        // Create movie card
        function createMovieCard(item, type) {
            const isArabic = /[\u0600-\u06FF]/.test(item.name);
            const isHD = item.name.includes('HD');
            
            const card = document.createElement('div');
            card.className = 'content-card';
            
            // Use real poster or fallback
            let posterUrl = item.stream_icon;
            if (!posterUrl) posterUrl = getLocalPoster(type);
            
            card.innerHTML = `
                <span class="content-badge">${type === 'series' ? 'Ù…Ø³Ù„Ø³Ù„' : 'ÙÙŠÙ„Ù…'}</span>
                <img src="${posterUrl}" class="content-poster" onerror="this.src='${getLocalPoster(type)}'">
                <div class="content-overlay">
                    <div class="content-title">${item.name}</div>
                    <div class="content-meta">
                        <span>${isArabic ? 'ğŸ‡ªğŸ‡¬ Ø¹Ø±Ø¨ÙŠ' : 'ğŸŒ Ø£Ø¬Ù†Ø¨ÙŠ'}</span>
                        ${isHD ? '<span class="content-hd">HD</span>' : ''}
                    </div>
                </div>
            `;
            
            card.onclick = () => playMovie(item.stream_id, item.name, type);
            return card;
        }

        // PLAY MOVIE - FIXED VERSION (plays INSIDE website)
        async function playMovie(streamId, title, type = 'movie') {
            try {
                const playerContainer = document.getElementById('playerContainer');
                const player = document.getElementById('videoPlayer');
                
                // Show player
                playerContainer.classList.add('active');
                
                // Show loading
                player.innerHTML = `
                    <div class="video-loading">
                        <div style="text-align:center;">
                            <div style="width:50px; height:50px; border:3px solid #e50914; border-top-color:transparent; border-radius:50%; animation:spin 1s linear infinite; margin:0 auto 20px;"></div>
                            <p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ "${title}"...</p>
                        </div>
                    </div>
                `;
                
                // SIMPLE FIX: Use the DIRECT streaming URL that we KNOW works
                // From your example: http://invo2-103.tutor3.site/vod/695ee5836c110e0ce7eeac69/695ee5836c110e0ce7eeac69.mp4/index.m3u8
                
                // But we don't have the hash. So we'll use the standard URL pattern
                const streamUrl = `${CONFIG.server}/movie/${CONFIG.username}/${CONFIG.password}/${streamId}.m3u8`;
                
                console.log('Streaming from:', streamUrl);
                
                // Set the video source
                player.src = streamUrl;
                
                // When video is ready, play it
                player.onloadeddata = () => {
                    player.play().catch(e => {
                        console.log('User needs to click play');
                    });
                };
                
                // Handle errors
                player.onerror = () => {
                    console.log('Video error, trying alternative...');
                    // Try alternative URL pattern
                    tryAlternativeStream(streamId, title, player);
                };
                
                // Add to history
                addToHistory(streamId, title);
                
            } catch (error) {
                console.error('Play error:', error);
                alert('ØªØ¹Ø°Ø± ØªØ´ØºÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹.');
            }
        }

        // Try alternative streaming URL
        function tryAlternativeStream(streamId, title, player) {
            // Try different URL patterns
            const alternatives = [
                // Your discovered pattern (with random hash - might work for some)
                `${CONFIG.videoServer}/vod/${streamId}/${streamId}.mp4/index.m3u8`,
                
                // Alternative patterns
                `${CONFIG.server}/get.php?username=${CONFIG.username}&password=${CONFIG.password}&type=m3u&output=ts&id=${streamId}`,
                
                // Direct stream
                `${CONFIG.server}/live/${CONFIG.username}/${CONFIG.password}/${streamId}.ts`
            ];
            
            // Try first alternative
            if (alternatives[0]) {
                console.log('Trying alternative:', alternatives[0]);
                player.src = alternatives[0];
                player.load();
            }
        }

        // Close player
        function closePlayer() {
            const player = document.getElementById('videoPlayer');
            player.pause();
            player.src = '';
            document.getElementById('playerContainer').classList.remove('active');
        }

        // Search function
        function performSearch() {
            const query = document.getElementById('searchInput').value.trim();
            if (!query) return;
            
            document.getElementById('searchSection').style.display = 'block';
            document.getElementById('searchTitle').textContent = `Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø«: "${query}"`;
            
            const allItems = [...movies, ...series];
            const results = allItems.filter(item => 
                item.name.toLowerCase().includes(query.toLowerCase())
            );
            
            const searchGrid = document.getElementById('searchGrid');
            searchGrid.innerHTML = '';
            
            if (results.length === 0) {
                searchGrid.innerHTML = '<div class="error-message">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬</div>';
            } else {
                results.slice(0, 20).forEach(item => {
                    const type = item.stream_type === 'series' ? 'series' : 'movie';
                    const card = createMovieCard(item, type);
                    searchGrid.appendChild(card);
                });
            }
        }

        // Hide search
        function hideSearch() {
            document.getElementById('searchSection').style.display = 'none';
        }

        // Play random
        function playRandom() {
            if (movies.length === 0) {
                alert('Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...');
                return;
            }
            const randomMovie = movies[Math.floor(Math.random() * movies.length)];
            playMovie(randomMovie.stream_id, randomMovie.name);
        }

        // Update hero
        function updateHero() {
            if (movies.length === 0) return;
            const randomMovie = movies[Math.floor(Math.random() * movies.length)];
            document.getElementById('heroTitle').textContent = randomMovie.name;
        }

        // Add to history
        function addToHistory(streamId, title) {
            let history = JSON.parse(localStorage.getItem('foura_history') || '[]');
            history.unshift({ id: streamId, title: title, time: Date.now() });
            history = history.slice(0, 10);
            localStorage.setItem('foura_history', JSON.stringify(history));
        }

        // Show continue watching
        function showContinueWatching() {
            const history = JSON.parse(localStorage.getItem('foura_history') || '[]');
            const grid = document.getElementById('continueGrid');
            
            if (history.length === 0) {
                alert('Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø³Ø¬Ù„ Ù…Ø´Ø§Ù‡Ø¯Ø§Øª');
                return;
            }
            
            grid.innerHTML = '';
            history.forEach(item => {
                const movie = movies.find(m => m.stream_id == item.id);
                if (movie) {
                    const card = createMovieCard(movie, 'movie');
                    grid.appendChild(card);
                }
            });
            
            document.getElementById('continueSection').style.display = 'block';
        }

        // Clear history
        function clearHistory() {
            if (confirm('Ù…Ø³Ø­ Ø§Ù„Ø³Ø¬Ù„ØŸ')) {
                localStorage.removeItem('foura_history');
                document.getElementById('continueSection').style.display = 'none';
            }
        }

        // Show my list
        function showMyList() {
            alert('Ù‚Ø±ÙŠØ¨Ø§Ù‹...');
        }

        // Show info
        function showInfo() {
            alert('FOURA CINEMA - Ù…Ù†ØµØ© Ø£ÙÙ„Ø§Ù… ÙˆÙ…Ø³Ù„Ø³Ù„Ø§Øª Ø¹Ø±Ø¨ÙŠØ©');
        }

        // Get local poster
        function getLocalPoster(type) {
            const colors = type === 'movie' ? ['#e50914', '#b20710'] : ['#0066cc', '#004c99'];
            const color = colors[Math.floor(Math.random() * colors.length)];
            const text = type === 'movie' ? 'ÙÙŠÙ„Ù…' : 'Ù…Ø³Ù„Ø³Ù„';
            
            return `data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="300">
                <rect width="200" height="300" fill="${color}"/>
                <text x="100" y="150" font-family="Arial" font-size="20" fill="white" text-anchor="middle">${text}</text>
            </svg>`;
        }

        // Sample movies
        function getSampleMovies() {
            return [
                { stream_id: 1, name: "Ø§Ù„Ø³Ø§Ø¯Ø© Ø§Ù„Ø§ÙØ§Ø¶Ù„ HD", stream_icon: "", stream_type: "movie" },
                { stream_id: 2, name: "The Teacher", stream_icon: "", stream_type: "movie" },
                { stream_id: 3, name: "ÙÙŠÙ„Ù… Ø§Ù„ÙƒÙ†Ø²", stream_icon: "", stream_type: "movie" },
                { stream_id: 4, name: "Mission Impossible", stream_icon: "", stream_type: "movie" },
                { stream_id: 5, name: "Ø§Ø³ÙƒÙ†Ø¯Ø±ÙŠØ© Ù„ÙŠÙ‡", stream_icon: "", stream_type: "movie" },
                { stream_id: 6, name: "Interstellar", stream_icon: "", stream_type: "movie" }
            ];
        }
    </script>
</body>
</html>
